npm run build

> anime-character-chat@0.1.0 build
> next build

   ▲ Next.js 15.3.2
   - Environments: .env.local

   Creating an optimized production build ...
 ✓ Compiled successfully in 36.0s
   Skipping linting
   Checking validity of types  .Failed to compile.

   Checking validity of types  .../src/app/chat/page.tsx:3583:82
Type error: Argument of type '(prev: BillingData | null) => { subscription: { status: string; cancelledAt: string; cancelReason: string; nextBillingDate: any; planId?: string | undefined; lastChargedAt?: any; subscriptionId?: string | undefined; }; currentPlan: string; credits: number; } | null' is not assignable to parameter of type 'SetStateAction<BillingData | null>'.
  Type '(prev: BillingData | null) => { subscription: { status: string; cancelledAt: string; cancelReason: string; nextBillingDate: any; planId?: string | undefined; lastChargedAt?: any; subscriptionId?: string | undefined; }; currentPlan: string; credits: number; } | null' is not assignable to type '(prevState: BillingData | null) => BillingData | null'.
    Type '{ subscription: { status: string; cancelledAt: string; cancelReason: string; nextBillingDate: any; planId?: string | undefined; lastChargedAt?: any; subscriptionId?: string | undefined; }; currentPlan: string; credits: number; } | null' is not assignable to type 'BillingData | null'.
      Type '{ subscription: { status: string; cancelledAt: string; cancelReason: string; nextBillingDate: any; planId?: string | undefined; lastChargedAt?: string | { seconds: number; _seconds?: number; } | Date | any; subscriptionId?: string; }; currentPlan: string; credits: number; }' is not assignable to type 'BillingData'.
        The types of 'subscription.planId' are incompatible between these types.
          Type 'string | undefined' is not assignable to type 'string'.
            Type 'undefined' is not assignable to type 'string'.

  3581 |
  3582 |                                                                   // Update billing data state immediately with cancelled status
> 3583 |                                                                   setBillingData(prev => prev ? {
       |                                                                                  ^
  3584 |                                                                     ...prev,
  3585 |                                                                     subscription: {
  3586 |                                                                       ...prev.subscription,
Next.js build worker exited with code: 1 and signal: null