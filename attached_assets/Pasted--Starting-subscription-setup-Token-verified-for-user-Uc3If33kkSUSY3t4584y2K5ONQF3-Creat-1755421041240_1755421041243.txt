🔧 Starting subscription setup...
✅ Token verified for user: Uc3If33kkSUSY3t4584y2K5ONQF3
📋 Creating vault setup token for plan: premium
🔑 Getting PayPal access token...
🌐 PayPal Base URL: https://api.paypal.com
🌐 PayPal Mode: live
🆔 PayPal Client ID exists: true
🆔 PayPal Client ID length: 80
🆔 PayPal Client ID preview: AaPXp4nm_s...
🔐 PayPal Client Secret exists: true
🔐 PayPal Client Secret length: 80
🔐 PayPal Client Secret preview: EOWzjaUYVA...
🔑 Basic auth string length: 216
🔑 Basic auth preview: QWFQWHA0bm1fczVaNlkt...
📋 Request body: grant_type=client_credentials
📋 Request headers: [ 'Authorization', 'Content-Type', 'Accept', 'Accept-Language' ]
📡 PayPal token response status: 401
📡 PayPal token response headers: {
  'accept-ranges': 'bytes',
  'access-control-expose-headers': 'Server-Timing',
  'cache-control': 'max-age=0, no-cache, no-store, must-revalidate',
  connection: 'keep-alive',
  'content-length': '77',
  'content-type': 'application/json',
  date: 'Sun, 17 Aug 2025 08:56:58 GMT',
  'paypal-debug-id': '6c1501121aff5',
  pragma: 'no-cache',
  'server-timing': 'traceparent;desc="00-00000000000000000006c1501121aff5-2bd867a4b4f5056f-01"',
  'set-cookie': 'l7_az=ccg13.slc; Path=/; Domain=paypal.com; Expires=Sun, 17 Aug 2025 09:26:58 GMT; HttpOnly; Secure',
  'strict-transport-security': 'max-age=63072000; includeSubDomains; preload',
  traceparent: '00-00000000000000000006c1501121aff5-11fd4eeca6842736-01',
  vary: 'Accept-Encoding',
  via: '1.1 varnish, 1.1 varnish, 1.1 varnish',
  'x-cache': 'MISS, MISS, MISS, MISS',
  'x-cache-hits': '0, 0, 0, 0',
  'x-paypal-token-service': 'IAAS',
  'x-served-by': 'cache-del21733-DEL, cache-del21733-DEL',
  'x-timer': 'S1755421018.856169,VS0,VE344'
}
❌ PayPal token request failed: {
  status: 401,
  statusText: 'Unauthorized',
  body: '{"error":"invalid_client","error_description":"Client Authentication failed"}',
  requestUrl: 'https://api.paypal.com/v1/oauth2/token',
  clientIdLength: 80,
  clientSecretLength: 80
}
❌ Subscription setup error: Error: PayPal authentication failed: 401 - {"error":"invalid_client","error_description":"Client Authentication failed"}
    at getPayPalAccessToken (src/services/PayPalSubscriptionService.ts:98:10)
    at async PayPalSubscriptionService.createVaultSetupToken (src/services/PayPalSubscriptionService.ts:113:24)
    at async POST (src/app/api/subscription/setup/route.ts:40:23)
   96 |       clientSecretLength: PAYPAL_CLIENT_SECRET?.length
   97 |     });
>  98 |     throw new Error(`PayPal authentication failed: ${response.status} - ${errorText}`);
      |          ^
   99 |   }
  100 |
  101 |   const data = await response.json();
 POST /api/subscription/setup 500 in 2393ms