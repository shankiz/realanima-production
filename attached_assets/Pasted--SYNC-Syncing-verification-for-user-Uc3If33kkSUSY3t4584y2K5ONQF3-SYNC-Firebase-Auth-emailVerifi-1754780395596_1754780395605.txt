[SYNC] Syncing verification for user: Uc3If33kkSUSY3t4584y2K5ONQF3
[SYNC] Firebase Auth emailVerified: true
[SYNC] Current Firestore isVerified: true
[SYNC] Verification status already up to date: true
 POST /api/auth/sync-verification 200 in 2501ms
 â—‹ Compiling /chat ...
Error verifying ID token: Error: Firebase ID token has incorrect "iss" (issuer) claim. Expected "https://securetoken.google.com/realanima-ai" but got "https://session.firebase.google.com/realanima-ai". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
    at async verifyIdToken (src/lib/firebase/admin.ts:207:25)
    at async GET (src/app/api/auth/session/route.ts:26:21)
  205 |
  206 |   try {
> 207 |     const decodedToken = await adminAuth.verifyIdToken(idToken);
      |                         ^
  208 |     return decodedToken;
  209 |   } catch (error) {
  210 |     console.error('Error verifying ID token:', error); {
  errorInfo: [Object],
  codePrefix: 'auth'
}
Token verification failed: Error: Firebase ID token has incorrect "iss" (issuer) claim. Expected "https://securetoken.google.com/realanima-ai" but got "https://session.firebase.google.com/realanima-ai". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
    at async verifyIdToken (src/lib/firebase/admin.ts:207:25)
    at async GET (src/app/api/auth/session/route.ts:26:21)
  205 |
  206 |   try {
> 207 |     const decodedToken = await adminAuth.verifyIdToken(idToken);
      |                         ^
  208 |     return decodedToken;
  209 |   } catch (error) {
  210 |     console.error('Error verifying ID token:', error); {
  errorInfo: [Object],
  codePrefix: 'auth'
}
 GET /api/auth/session 401 in 451ms
Error verifying ID token: Error: Firebase ID token has incorrect "iss" (issuer) claim. Expected "https://securetoken.google.com/realanima-ai" but got "https://session.firebase.google.com/realanima-ai". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
    at async verifyIdToken (src/lib/firebase/admin.ts:207:25)
    at async GET (src/app/api/auth/session/route.ts:26:21)
  205 |
  206 |   try {
> 207 |     const decodedToken = await adminAuth.verifyIdToken(idToken);
      |                         ^
  208 |     return decodedToken;
  209 |   } catch (error) {
  210 |     console.error('Error verifying ID token:', error); {
  errorInfo: [Object],
  codePrefix: 'auth'
}
Token verification failed: Error: Firebase ID token has incorrect "iss" (issuer) claim. Expected "https://securetoken.google.com/realanima-ai" but got "https://session.firebase.google.com/realanima-ai". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
    at async verifyIdToken (src/lib/firebase/admin.ts:207:25)
    at async GET (src/app/api/auth/session/route.ts:26:21)
  205 |
  206 |   try {
> 207 |     const decodedToken = await adminAuth.verifyIdToken(idToken);
      |                         ^
  208 |     return decodedToken;
  209 |   } catch (error) {
  210 |     console.error('Error verifying ID token:', error); {
  errorInfo: [Object],
  codePrefix: 'auth'
}
 GET /api/auth/session 401 in 501ms